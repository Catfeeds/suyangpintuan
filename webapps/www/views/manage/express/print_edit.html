{include file='../public_btn.html'}<style type="text/css">/* kindeditor upload start */.ke-button-common {    background: #69a74e none repeat scroll 0 0;    border-radius: 3px;    color: #fff;    cursor: pointer;    display: inline-block;    font-size: 12px;    height: 24px;    padding: 1px 5px;    text-align: center;    text-decoration: none;    vertical-align: middle;    white-space: nowrap;}.ke-inline-block {    display: inline-block;    vertical-align: middle;}.ke-button {    border: none;}.ke-upload-area {    overflow: hidden;    position: relative;}.ke-upload-file {    border: none;    opacity: 0;    position: absolute;    right: 0;    top: 0;    z-index: 11111;    cursor: pointer;    height: 24px;}/* kindeditor upload end*/#design-area {    margin: 20px 0;    width: 280mm;    height: 150mm;    background: #eee;    position: relative;}.field {    padding: 2px 5px;    margin-right: 4px;    border: 1px solid #ccc;    border-radius: 4px;    cursor: pointer;}.field-area h3 {    margin-bottom: 10px;}.auto-field {    margin-bottom: 10px;}.set-field table td {    height: 34px;    line-height: 34px;    vertical-align: middle;}.field-moveable {    border: 1px dotted blue;    cursor: move;    padding: 0 3px;    color: blue;    font-size: 4mm;    height: 24px;    line-height: 24px;    vertical-align: middle;    position: absolute;    z-index: 1;}</style><div class="html-box">    <form id="form-express-print" target="iframeNewsTarget" method="post" action="/manage/express/printEdit">        <table class="table-list">            <tbody>                <tr>                    <td class="td-label">                    </td>                    <td colspan="3" class="td-input">                        {if !empty($publicTpl)}<a class="uiBtn BtnBlue" href="#!express/printEdit?id={$row['id']}">取消公共模版</a>{/if}                        <button class="uiBtn BtnGreen d3-main-modal" data-title="公用模版范例选择" data-url="/manage/express/printPublic" type="button">点此引入模版</button>                        您可以引入公用模版,作为范例或自定义修改. 引入后请点击下方的保存按钮                    </td>                </tr>                <tr>                    <td class="td-label">                        <label>快递公司：</label>                    </td>                    <td class="td-input">                        <p>{$row.name}</p>                    </td>                    <td rowspan="3" class="td-label">                        <label>模版描述：</label>                    </td>                    <td rowspan="3" class="td-input">                        <div class="form-tip">                            <textarea name="post[description]">{$config.description|default:''}</textarea>                        </div>                    </td>                </tr>                <tr>                    <td class="td-label">                        <label>左边距：</label>                    </td>                    <td class="td-input">                        <input type="text" class="form-i w40" name="post[left]" value="{$config.left|default:0}" />                        <span>毫米 负值左移, 正值右移</span>                    </td>                </tr>                <tr>                    <td class="td-label">                        <label>上边距：</label>                    </td>                    <td class="td-input">                        <input type="text" class="form-i w40" name="post[top]" value="{$config.top|default:0}" />                        <span>毫米 负值上移, 正值下移</span>                    </td>                </tr>                <tr>                    <td class="td-label">                        <label>单据宽度：</label>                    </td>                    <td class="td-input">                        <input type="text" class="form-i w40 design-width" name="post[width]" value="{$config.width|default:225}" />                        <span>毫米</span>                    </td>                    <td class="td-label">                        <label>单据高度：</label>                    </td>                    <td class="td-input">                        <input type="text" class="form-i w40 design-height" name="post[height]" value="{$config.height|default:125}" />                        <span>毫米</span>                    </td>                </tr>                <tr>                    <td class="td-label">                        <label>背景图片：</label>                    </td>                    <td colspan="3">                        <span class="upload">                            <input type="hidden" id="uploadButton" value="上传背景图片" />                        </span> 请确保扫描的快递单, 尺寸与实际尺寸相同                    </td>                </tr>            </tbody>        </table>        <div class="field-area">            <h3>请勾选需要显示的字段. 并将图片内的对应字段拖动到所需位置</h3>            <div class="auto-field">                <span>自动字段: </span> {foreach from=$field item=item key=key name=name} {if $item.ref}                <span class="field-area" id="src-field-{$key}" data-id="field-{$key}">                    <label class="field">                        <input type="hidden" name="post[field][{$key}][id]" value="{if !empty($item.tpl_id)}{$item.id}{/if}">                        <input type="hidden" name="post[field][{$key}][name]" value="{$item.name}">                        <input type="hidden" name="post[field][{$key}][left]" value="{$item.left}" class="field-left" >                        <input type="hidden" name="post[field][{$key}][top]" value="{$item.top}" class="field-top" >                        <input type="hidden" name="post[field][{$key}][ref]" value="{$item.ref}">                        <input type="hidden" name="post[field][{$key}][default]" value="{$item.default}">                        <input type="hidden" name="post[field][{$key}][status]" value="0">                        <input class="field-check" type="checkbox" name="post[field][{$key}][status]" value="1" {if $item.status}checked="checked" {/if}>                        {$item.name}                        <input type="hidden" name="post[field][{$key}][value]" value="{$item.value}">                        <input class="field-title" type="hidden" value="{$item.name}">                    </label>                </span> {/if} {/foreach}                <span class="c-red">自动字段将会自动替换成订单内对应数据</span>            </div>            <div class="set-field">                <span class="c-red">                    <span>指定字段: </span>                <button class="uiBtn BtnBlue add-field" type="button" data-next-key="{count($field)}">点此增加字段</button>                <span>指定字段需填写内容, 否则无显示. </span>                <span>字段内可以填写符号后拖动到所需位置如:                        <span> &radic; </span>                <span> &Chi; </span>                </span>                </span>                <table>                    {foreach from=$field item=item key=key name=name} {if !$item.ref}                    <tr class="field-area {if !$item.default}field-ext{/if}" id="src-field-{$key}" data-id="field-{$key}">                        <td>                            <label class="field">                                <input type="hidden" name="post[field][{$key}][id]" value="{if !empty($item.tpl_id)}{$item.id}{/if}">                                <input type="hidden" name="post[field][{$key}][name]" value="{$item.name}">                                <input type="hidden" name="post[field][{$key}][left]" value="{$item.left}" class="field-left">                                <input type="hidden" name="post[field][{$key}][top]" value="{$item.top}" class="field-top">                                <input type="hidden" name="post[field][{$key}][ref]" value="0">                                <input type="hidden" name="post[field][{$key}][default]" value="{$item.default}">                                <input type="hidden" name="post[field][{$key}][status]" value="0">                                <input class="field-check" type="checkbox" name="post[field][{$key}][status]" value="1" {if $item.status}checked="checked" {/if}> {$item.name}                            </label>                        </td>                        <td>                            内容:                            <input class="form-i w200 field-title" type="text" name="post[field][{$key}][value]" value="{$item.value}">                        </td>                        <td>                            {if !$item.default}                            <button class="uiBtn remove-field" style="padding:2px 5px;" type="button">删除本条</button>                            {/if}                        </td>                    </tr>                    {/if} {/foreach}                </table>            </div>        </div>        <input type="hidden" name="post[publicTpl]" value="{if isset($publicTpl)}{$publicTpl}{/if}" />        <input type="hidden" name="post[id]" value="{$config.id}" />        <input id="express_id" type="hidden" name="post[express_id]" value="{$row.id|default:''}" />        <input id="config-image" type="hidden" name="post[old_image]" value="{if (!empty($config.old_image))}{$config.old_image}{/if}">        <input id="new-image" type="hidden" name="post[image]" value="{if !empty($publicTpl)}{$config.image}{/if}">        <button type="button" class="uiBtn BtnGreen submit">保存设置</button>        <a href="/manage/express/printPreview?express_id={$row.id}" target="_blank" class="uiBtn BtnBlue">预&nbsp;&nbsp;览</a>        <div id="design-area">            {foreach from=$field item=item key=key name=name}            <label class="field-moveable" id="field-{$key}" style="left:{$item.left};top:{$item.top};{if !$item.status||!$item.value}display:none;{/if}">{if $item.ref}{$item.name}{else}{$item.value}{/if}</label>            {/foreach}            <img id="express_background" src="{$config['image']}" style="position: absolute;top:0;left:0;">        </div>    </form>    <script type="text/javascript">    $.loadJs('/admin/js/edit/kindeditor-all-min.js', function() {        var uploadbutton = KindEditor.uploadbutton({            button: KindEditor('#uploadButton')[0],            fieldName: 'uploadFile',            url: '/manage/express/backgroundUpload',            extraParams: {                lastimg: ''            },            afterUpload: function(res) {                if (res.error > 0) {                    com.xtip(res.msg, {                        type: 2                    });                } else {                    KindEditor('#new-image, [name="lastimg"]:input').val(res.src);                    KindEditor('#express_background').attr('src', res.src);                }            },            afterError: function(str) {                com.xtip('上传失败', {                    type: 2                });            }        });        uploadbutton.fileBox.change(function() {            uploadbutton.submit();        });    });    $.loadJs('/admin/js/manage/express_print.js', function() {});    </script></div>