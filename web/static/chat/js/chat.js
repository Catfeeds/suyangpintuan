webpackJsonp([1],{"./node_modules/howler/dist/howler.js":function(e,exports,t){(function(t){var i,o;!function(){"use strict";var n=function(){this.init()};n.prototype={init:function(){var e=this||s;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||s;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&(t.masterGain.gain.value=e);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var o=t._howls[i]._getSoundIds(),n=0;n<o.length;n++){var r=t._howls[i]._soundById(o[n]);r&&r._node&&(r._node.volume=r._volume*e)}return t}return t._volume},mute:function(e){var t=this||s;t.ctx||p(),t._muted=e,t.usingWebAudio&&(t.masterGain.gain.value=e?0:t._volume);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var o=t._howls[i]._getSoundIds(),n=0;n<o.length;n++){var r=t._howls[i]._soundById(o[n]);r&&r._node&&(r._node.muted=!!e||r._muted)}return t},unload:function(){for(var e=this||s,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||s)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||s;if(e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var t=new Audio;void 0===t.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||s,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var i=t.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),n=o&&parseInt(o[0].split("/")[1],10)<33;return e._codecs={mp3:!(n||!i&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||s,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),i=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(t||i)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(){s._autoResume();var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),void 0===t.start?t.noteOn(0):t.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0)}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&s.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var i=0;i<e._howls[t]._sounds.length;i++)if(!e._howls[t]._sounds[i]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&s.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var s=new n,r=function(e){var t=this;if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");t.init(e)};r.prototype={init:function(e){var t=this;return s.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onresume=[],t._webAudio=s.usingWebAudio&&!t._html5,void 0!==s.ctx&&s.ctx&&s.mobileAutoEnable&&s._enableMobileAudio(),s._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(s.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var i=0;i<e._src.length;i++){var o,n;if(e._format&&e._format[i])o=e._format[i];else{if("string"!=typeof(n=e._src[i])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}o=/^data:audio\/([^;,]+);/i.exec(n),o||(o=/\.([^.]+)$/.exec(n.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&s.codecs(o)){t=e._src[i];break}}return t?(e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&c(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,t){var i=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===i._state&&!i._sprite[e])return null;if(void 0===e){e="__default";for(var n=0,r=0;r<i._sounds.length;r++)i._sounds[r]._paused&&!i._sounds[r]._ended&&(n++,o=i._sounds[r]._id);1===n?e=null:o=null}}var a=o?i._soundById(o):i._inactiveSound();if(!a)return null;if(o&&!e&&(e=a._sprite||"__default"),"loaded"!==i._state){a._sprite=e,a._ended=!1;var l=a._id;return i._queue.push({event:"play",action:function(){i.play(l)}}),l}if(o&&!a._paused)return t||setTimeout(function(){i._emit("play",a._id)},0),a._id;i._webAudio&&s._autoResume();var c=Math.max(0,a._seek>0?a._seek:i._sprite[e][0]/1e3),h=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-c),d=1e3*h/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=e,a._seek=c,a._start=i._sprite[e][0]/1e3,a._stop=(i._sprite[e][0]+i._sprite[e][1])/1e3,a._loop=!(!a._loop&&!i._sprite[e][2]);var u=a._node;if(i._webAudio){var p=function(){i._refreshBuffer(a);var e=a._muted||i._muted?0:a._volume;u.gain.setValueAtTime(e,s.ctx.currentTime),a._playStart=s.ctx.currentTime,void 0===u.bufferSource.start?a._loop?u.bufferSource.noteGrainOn(0,c,86400):u.bufferSource.noteGrainOn(0,c,h):a._loop?u.bufferSource.start(0,c,86400):u.bufferSource.start(0,c,h),d!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),d)),t||setTimeout(function(){i._emit("play",a._id)},0)};"running"===s.state?p():(i.once("resume",p),i._clearTimer(a._id))}else{var f=function(){u.currentTime=c,u.muted=a._muted||i._muted||s._muted||u.muted,u.volume=a._volume*s.volume(),u.playbackRate=a._rate;try{if(u.play(),u.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");d!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),d)),t||i._emit("play",a._id)}catch(e){i._emit("playerror",a._id,e)}},_=window&&window.ejecta||!u.readyState&&s._navigator.isCocoonJS;if(4===u.readyState||_)f();else{var m=function(){f(),u.removeEventListener(s._canPlayEvent,m,!1)};u.addEventListener(s._canPlayEvent,m,!1),i._clearTimer(a._id)}}return a._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var i=t._getSoundIds(e),o=0;o<i.length;o++){t._clearTimer(i[o]);var n=t._soundById(i[o]);if(n&&!n._paused&&(n._seek=t.seek(i[o]),n._rateSeek=0,n._paused=!0,t._stopFade(i[o]),n._node))if(t._webAudio){if(!n._node.bufferSource)continue;void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),t._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==1/0||n._node.pause();arguments[1]||t._emit("pause",n?n._id:null)}return t},stop:function(e,t){var i=this;if("loaded"!==i._state)return i._queue.push({event:"stop",action:function(){i.stop(e)}}),i;for(var o=i._getSoundIds(e),n=0;n<o.length;n++){i._clearTimer(o[n]);var s=i._soundById(o[n]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(o[n]),s._node&&(i._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause())),t||i._emit("stop",s._id))}return i},mute:function(e,t){var i=this;if("loaded"!==i._state)return i._queue.push({event:"mute",action:function(){i.mute(e,t)}}),i;if(void 0===t){if("boolean"!=typeof e)return i._muted;i._muted=e}for(var o=i._getSoundIds(t),n=0;n<o.length;n++){var r=i._soundById(o[n]);r&&(r._muted=e,i._webAudio&&r._node?r._node.gain.setValueAtTime(e?0:r._volume,s.ctx.currentTime):r._node&&(r._node.muted=!!s._muted||e),i._emit("mute",r._id))}return i},volume:function(){var e,t,i=this,o=arguments;if(0===o.length)return i._volume;if(1===o.length||2===o.length&&void 0===o[1]){i._getSoundIds().indexOf(o[0])>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10));var n;if(!(void 0!==e&&e>=0&&e<=1))return n=t?i._soundById(t):i._sounds[0],n?n._volume:0;if("loaded"!==i._state)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,o)}}),i;void 0===t&&(i._volume=e),t=i._getSoundIds(t);for(var r=0;r<t.length;r++)(n=i._soundById(t[r]))&&(n._volume=e,o[2]||i._stopFade(t[r]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,s.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*s.volume()),i._emit("volume",n._id));return i},fade:function(e,t,i,o){var n=this;if("loaded"!==n._state)return n._queue.push({event:"fade",action:function(){n.fade(e,t,i,o)}}),n;n.volume(e,o);for(var r=n._getSoundIds(o),a=0;a<r.length;a++){var l=n._soundById(r[a]);if(l){if(o||n._stopFade(r[a]),n._webAudio&&!l._muted){var c=s.ctx.currentTime,h=c+i/1e3;l._volume=e,l._node.gain.setValueAtTime(e,c),l._node.gain.linearRampToValueAtTime(t,h)}n._startFadeInterval(l,e,t,i,r[a])}}return n},_startFadeInterval:function(e,t,i,o,n){var s=this,r=t,a=t>i?"out":"in",l=Math.abs(t-i),c=l/.01,h=c>0?o/c:o;h<4&&(c=Math.ceil(c/(4/h)),h=4),e._interval=setInterval(function(){c>0&&(r+="in"===a?.01:-.01),r=Math.max(0,r),r=Math.min(1,r),r=Math.round(100*r)/100,s._webAudio?(void 0===n&&(s._volume=r),e._volume=r):s.volume(r,e._id,!0),(i<t&&r<=i||i>t&&r>=i)&&(clearInterval(e._interval),e._interval=null,s.volume(i,e._id),s._emit("fade",e._id))},h)},_stopFade:function(e){var t=this,i=t._soundById(e);return i&&i._interval&&(t._webAudio&&i._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(i._interval),i._interval=null,t._emit("fade",e)),t},loop:function(){var e,t,i,o=this,n=arguments;if(0===n.length)return o._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(i=o._soundById(parseInt(n[0],10)))&&i._loop;e=n[0],o._loop=e}else 2===n.length&&(e=n[0],t=parseInt(n[1],10));for(var s=o._getSoundIds(t),r=0;r<s.length;r++)(i=o._soundById(s[r]))&&(i._loop=e,o._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=e,e&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return o},rate:function(){var e,t,i=this,o=arguments;if(0===o.length)t=i._sounds[0]._id;else if(1===o.length){var n=i._getSoundIds(),r=n.indexOf(o[0]);r>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));var a;if("number"!=typeof e)return a=i._soundById(t),a?a._rate:i._rate;if("loaded"!==i._state)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,o)}}),i;void 0===t&&(i._rate=e),t=i._getSoundIds(t);for(var l=0;l<t.length;l++)if(a=i._soundById(t[l])){a._rateSeek=i.seek(t[l]),a._playStart=i._webAudio?s.ctx.currentTime:a._playStart,a._rate=e,i._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.value=e:a._node&&(a._node.playbackRate=e);var c=i.seek(t[l]),h=(i._sprite[a._sprite][0]+i._sprite[a._sprite][1])/1e3-c,d=1e3*h/Math.abs(a._rate);!i._endTimers[t[l]]&&a._paused||(i._clearTimer(t[l]),i._endTimers[t[l]]=setTimeout(i._ended.bind(i,a),d)),i._emit("rate",a._id)}return i},seek:function(){var e,t,i=this,o=arguments;if(0===o.length)t=i._sounds[0]._id;else if(1===o.length){var n=i._getSoundIds(),r=n.indexOf(o[0]);r>=0?t=parseInt(o[0],10):i._sounds.length&&(t=i._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(void 0===t)return i;if("loaded"!==i._state)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,o)}}),i;var a=i._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(i._webAudio){var l=i.playing(t)?s.ctx.currentTime-a._playStart:0,c=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(c+l*Math.abs(a._rate))}return a._node.currentTime}var h=i.playing(t);h&&i.pause(t,!0),a._seek=e,a._ended=!1,i._clearTimer(t),h&&i.play(t,!0),!i._webAudio&&a._node&&(a._node.currentTime=e),i._emit("seek",t)}return i},playing:function(e){var t=this;if("number"==typeof e){var i=t._soundById(e);return!!i&&!i._paused}for(var o=0;o<t._sounds.length;o++)if(!t._sounds[o]._paused)return!0;return!1},duration:function(e){var t=this,i=t._duration,o=t._soundById(e);return o&&(i=t._sprite[o._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,i=0;i<t.length;i++){if(t[i]._paused||e.stop(t[i]._id),!e._webAudio){/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(t[i]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[i]._node.removeEventListener("error",t[i]._errorFn,!1),t[i]._node.removeEventListener(s._canPlayEvent,t[i]._loadFn,!1)}delete t[i]._node,e._clearTimer(t[i]._id);var o=s._howls.indexOf(e);o>=0&&s._howls.splice(o,1)}var n=!0;for(i=0;i<s._howls.length;i++)if(s._howls[i]._src===e._src){n=!1;break}return l&&n&&delete l[e._src],s.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,i,o){var n=this,s=n["_on"+e];return"function"==typeof t&&s.push(o?{id:i,fn:t,once:o}:{id:i,fn:t}),n},off:function(e,t,i){var o=this,n=o["_on"+e],s=0;if("number"==typeof t&&(i=t,t=null),t||i)for(s=0;s<n.length;s++){var r=i===n[s].id;if(t===n[s].fn&&r||!t&&r){n.splice(s,1);break}}else if(e)o["_on"+e]=[];else{var a=Object.keys(o);for(s=0;s<a.length;s++)0===a[s].indexOf("_on")&&Array.isArray(o[a[s]])&&(o[a[s]]=[])}return o},once:function(e,t,i){var o=this;return o.on(e,t,i,1),o},_emit:function(e,t,i){for(var o=this,n=o["_on"+e],s=n.length-1;s>=0;s--)n[s].id&&n[s].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,i)}.bind(o,n[s].fn),0),n[s].once&&o.off(e,n[s].fn,n[s].id));return o},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,function(){e._queue.shift(),e._loadQueue()}),t.action()}return e},_ended:function(e){var t=this,i=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused)return setTimeout(t._ended.bind(t,e),100),t;var o=!(!e._loop&&!t._sprite[i][2]);if(t._emit("end",e._id),!t._webAudio&&o&&t.stop(e._id,!0).play(e._id),t._webAudio&&o){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=s.ctx.currentTime;var n=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),n)}return t._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),s._autoSuspend()),t._webAudio||o||t.stop(e._id),t},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,i=0;i<t._sounds.length;i++)if(e===t._sounds[i]._id)return t._sounds[i];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new a(e)},_drain:function(){var e=this,t=e._pool,i=0,o=0;if(!(e._sounds.length<t)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&i++;for(o=e._sounds.length-1;o>=0;o--){if(i<=t)return;e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),i--)}}},_getSoundIds:function(e){var t=this;if(void 0===e){for(var i=[],o=0;o<t._sounds.length;o++)i.push(t._sounds[o]._id);return i}return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=s.ctx.createBufferSource(),e._node.bufferSource.buffer=l[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,t},_cleanBuffer:function(e){var t=this;if(t._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}}return e.bufferSource=null,t}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++s._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,i=s._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),e._node.gain.setValueAtTime(i,s.ctx.currentTime),e._node.paused=!0,e._node.connect(s.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(s._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=i*s.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++s._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(s._canPlayEvent,e._loadFn,!1)}};var l={},c=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void u(e);if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),o=new Uint8Array(i.length),n=0;n<i.length;++n)o[n]=i.charCodeAt(n);d(o.buffer,e)}else{var s=new XMLHttpRequest;s.open("GET",t,!0),s.withCredentials=e._xhrWithCredentials,s.responseType="arraybuffer",s.onload=function(){var t=(s.status+"")[0];if("0"!==t&&"2"!==t&&"3"!==t)return void e._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".");d(s.response,e)},s.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},h(s)}},h=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){s.ctx.decodeAudioData(e,function(e){e&&t._sounds.length>0&&(l[t._src]=e,u(t,e))},function(){t._emit("loaderror",null,"Decoding audio data failed.")})},u=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(e){s.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),t=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=t?parseInt(t[1],10):null;if(e&&i&&i<9){var o=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());(s._navigator&&s._navigator.standalone&&!o||s._navigator&&!s._navigator.standalone&&!o)&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.value=s._muted?0:1,s.masterGain.connect(s.ctx.destination)),s._setup()};i=[],void 0!==(o=function(){return{Howler:s,Howl:r}}.apply(exports,i))&&(e.exports=o),exports.Howler=s,exports.Howl=r,"undefined"!=typeof window?(window.HowlerGlobal=n,window.Howler=s,window.Howl=r,window.Sound=a):void 0!==t&&(t.HowlerGlobal=n,t.Howler=s,t.Howl=r,t.Sound=a)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var i=t._howls.length-1;i>=0;i--)t._howls[i].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,i){var o=this;return o.ctx&&o.ctx.listener?(t="number"!=typeof t?o._pos[1]:t,i="number"!=typeof i?o._pos[2]:i,"number"!=typeof e?o._pos:(o._pos=[e,t,i],o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(e,t,i,o,n,s){var r=this;if(!r.ctx||!r.ctx.listener)return r;var a=r._orientation;return t="number"!=typeof t?a[1]:t,i="number"!=typeof i?a[2]:i,o="number"!=typeof o?a[3]:o,n="number"!=typeof n?a[4]:n,s="number"!=typeof s?a[5]:s,"number"!=typeof e?a:(r._orientation=[e,t,i,o,n,s],r.ctx.listener.setOrientation(e,t,i,o,n,s),r)},Howl.prototype.init=function(e){return function(t){var i=this;return i._orientation=t.orientation||[1,0,0],i._stereo=t.stereo||null,i._pos=t.pos||null,i._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},i._onstereo=t.onstereo?[{fn:t.onstereo}]:[],i._onpos=t.onpos?[{fn:t.onpos}]:[],i._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(t,i)}}),o;var n=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0]}for(var s=o._getSoundIds(i),r=0;r<s.length;r++){var a=o._soundById(s[r]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,n),"spatial"===n?a._panner.setPosition(t,0,0):a._panner.pan.value=t),o._emit("stereo",a._id)}}return o},Howl.prototype.pos=function(t,i,o,n){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(t,i,o,n)}}),s;if(i="number"!=typeof i?0:i,o="number"!=typeof o?-.5:o,void 0===n){if("number"!=typeof t)return s._pos;s._pos=[t,i,o]}for(var r=s._getSoundIds(n),a=0;a<r.length;a++){var l=s._soundById(r[a]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,i,o],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),l._panner.setPosition(t,i,o)),s._emit("pos",l._id)}}return s},Howl.prototype.orientation=function(t,i,o,n){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(t,i,o,n)}}),s;if(i="number"!=typeof i?s._orientation[1]:i,o="number"!=typeof o?s._orientation[2]:o,void 0===n){if("number"!=typeof t)return s._orientation;s._orientation=[t,i,o]}for(var r=s._getSoundIds(n),a=0;a<r.length;a++){var l=s._soundById(r[a]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,i,o],l._node&&(l._panner||(l._pos||(l._pos=s._pos||[0,0,-.5]),e(l,"spatial")),l._panner.setOrientation(t,i,o)),s._emit("orientation",l._id)}}return s},Howl.prototype.pannerAttr=function(){var t,i,o,n=this,s=arguments;if(!n._webAudio)return n;if(0===s.length)return n._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return o=n._soundById(parseInt(s[0],10)),o?o._pannerAttr:n._pannerAttr;t=s[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:n._panningModel})}else 2===s.length&&(t=s[0],i=parseInt(s[1],10));for(var r=n._getSoundIds(i),a=0;a<r.length;a++)if(o=n._soundById(r[a])){var l=o._pannerAttr;l={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:l.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:l.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:l.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:l.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:l.panningModel};var c=o._panner;c?(c.coneInnerAngle=l.coneInnerAngle,c.coneOuterAngle=l.coneOuterAngle,c.coneOuterGain=l.coneOuterGain,c.distanceModel=l.distanceModel,c.maxDistance=l.maxDistance,c.refDistance=l.refDistance,c.rolloffFactor=l.rolloffFactor,c.panningModel=l.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"))}return n},Sound.prototype.init=function(e){return function(){var t=this,i=t._parent;t._orientation=i._orientation,t._stereo=i._stereo,t._pos=i._pos,t._pannerAttr=i._pannerAttr,e.call(this),t._stereo?i.stereo(t._stereo):t._pos&&i.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,i=t._parent;return t._orientation=i._orientation,t._pos=i._pos,t._pannerAttr=i._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e,t){t=t||"spatial","spatial"===t?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}()}).call(exports,t("./node_modules/webpack/buildin/global.js"))},"./node_modules/iscroll/build/iscroll-probe.js":function(e,exports,t){var i;!function(o,n,s){function r(e,t){this.wrapper="string"==typeof e?n.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!h.hasPointer,disableTouch:h.hasPointer||!h.hasTouch,disableMouse:h.hasPointer||h.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:void 0===o.onmousedown};for(var i in t)this.options[i]=t[i];this.translateZ=this.options.HWCompositing&&h.hasPerspective?" translateZ(0)":"",this.options.useTransition=h.hasTransition&&this.options.useTransition,this.options.useTransform=h.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?h.ease[this.options.bounceEasing]||h.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function a(e,t,i){var o=n.createElement("div"),s=n.createElement("div");return!0===i&&(o.style.cssText="position:absolute;z-index:9999",s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),s.className="iScrollIndicator","h"==e?(!0===i&&(o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",s.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(!0===i&&(o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",s.style.width="100%"),o.className="iScrollVerticalScrollbar"),o.style.cssText+=";overflow:hidden",t||(o.style.pointerEvents="none"),o.appendChild(s),o}function l(e,t){this.wrapper="string"==typeof t.el?n.querySelector(t.el):t.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var i in t)this.options[i]=t[i];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(h.addEvent(this.indicator,"touchstart",this),h.addEvent(o,"touchend",this)),this.options.disablePointer||(h.addEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.addEvent(o,h.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(h.addEvent(this.indicator,"mousedown",this),h.addEvent(o,"mouseup",this))),this.options.fade){this.wrapperStyle[h.style.transform]=this.scroller.translateZ;var s=h.style.transitionDuration;this.wrapperStyle[s]=h.isBadAndroid?"0.0001ms":"0ms";var r=this;h.isBadAndroid&&c(function(){"0.0001ms"===r.wrapperStyle[s]&&(r.wrapperStyle[s]="0s")}),this.wrapperStyle.opacity="0"}}var c=o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(e){o.setTimeout(e,1e3/60)},h=function(){function e(e){return!1!==r&&(""===r?e:r+e.charAt(0).toUpperCase()+e.substr(1))}var t={},i=n.createElement("div").style,r=function(){for(var e=["t","webkitT","MozT","msT","OT"],t=0,o=e.length;t<o;t++)if(e[t]+"ransform"in i)return e[t].substr(0,e[t].length-1);return!1}();t.getTime=Date.now||function(){return(new Date).getTime()},t.extend=function(e,t){for(var i in t)e[i]=t[i]},t.addEvent=function(e,t,i,o){e.addEventListener(t,i,!!o)},t.removeEvent=function(e,t,i,o){e.removeEventListener(t,i,!!o)},t.prefixPointerEvent=function(e){return o.MSPointerEvent?"MSPointer"+e.charAt(7).toUpperCase()+e.substr(8):e},t.momentum=function(e,t,i,o,n,r){var a,l,c=e-t,h=s.abs(c)/i;return r=void 0===r?6e-4:r,a=e+h*h/(2*r)*(c<0?-1:1),l=h/r,a<o?(a=n?o-n/2.5*(h/8):o,c=s.abs(a-e),l=c/h):a>0&&(a=n?n/2.5*(h/8):0,c=s.abs(e)+a,l=c/h),{destination:s.round(a),duration:l}};var a=e("transform");return t.extend(t,{hasTransform:!1!==a,hasPerspective:e("perspective")in i,hasTouch:"ontouchstart"in o,hasPointer:!(!o.PointerEvent&&!o.MSPointerEvent),hasTransition:e("transition")in i}),t.isBadAndroid=function(){var e=o.navigator.appVersion;if(/Android/.test(e)&&!/Chrome\/\d/.test(e)){var t=e.match(/Safari\/(\d+.\d)/);return!(t&&"object"==typeof t&&t.length>=2)||parseFloat(t[1])<535.19}return!1}(),t.extend(t.style={},{transform:a,transitionTimingFunction:e("transitionTimingFunction"),transitionDuration:e("transitionDuration"),transitionDelay:e("transitionDelay"),transformOrigin:e("transformOrigin")}),t.hasClass=function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},t.addClass=function(e,i){if(!t.hasClass(e,i)){var o=e.className.split(" ");o.push(i),e.className=o.join(" ")}},t.removeClass=function(e,i){if(t.hasClass(e,i)){var o=new RegExp("(^|\\s)"+i+"(\\s|$)","g");e.className=e.className.replace(o," ")}},t.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},t.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},t.extend(t.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),t.extend(t.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return s.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){return(e-=1)*e*(5*e+4)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){return 0===e?0:1==e?1:.4*s.pow(2,-10*e)*s.sin((e-.055)*(2*s.PI)/.22)+1}}}),t.tap=function(e,t){var i=n.createEvent("Event");i.initEvent(t,!0,!0),i.pageX=e.pageX,i.pageY=e.pageY,e.target.dispatchEvent(i)},t.click=function(e){var t,i=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||(t=n.createEvent("MouseEvents"),t.initMouseEvent("click",!0,!0,e.view,1,i.screenX,i.screenY,i.clientX,i.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),t._constructed=!0,i.dispatchEvent(t))},t}();r.prototype={version:"5.2.0",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(1!=h.eventType[e.type]){if(0!==(e.which?e.button:e.button<2?0:4==e.button?1:2))return}if(this.enabled&&(!this.initiated||h.eventType[e.type]===this.initiated)){!this.options.preventDefault||h.isBadAndroid||h.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,i=e.touches?e.touches[0]:e;this.initiated=h.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=h.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,t=this.getComputedPosition(),this._translate(s.round(t.x),s.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&h.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,i,o,n,r=e.touches?e.touches[0]:e,a=r.pageX-this.pointX,l=r.pageY-this.pointY,c=h.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=a,this.distY+=l,o=s.abs(this.distX),n=s.abs(this.distY),!(c-this.endTime>300&&o<10&&n<10)){if(this.directionLocked||this.options.freeScroll||(o>n+this.options.directionLockThreshold?this.directionLocked="h":n>=o+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}a=this.hasHorizontalScroll?a:0,l=this.hasVerticalScroll?l:0,t=this.x+a,i=this.y+l,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+a/3:t>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+l/3:i>0?0:this.maxScrollY),this.directionX=a>0?-1:a<0?1:0,this.directionY=l>0?-1:l<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,i),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(e){if(this.enabled&&h.eventType[e.type]===this.initiated){this.options.preventDefault&&!h.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,i,o=(e.changedTouches&&e.changedTouches[0],h.getTime()-this.startTime),n=s.round(this.x),r=s.round(this.y),a=s.abs(n-this.startX),l=s.abs(r-this.startY),c=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=h.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(n,r),!this.moved)return this.options.tap&&h.tap(e,this.options.tap),this.options.click&&h.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&o<200&&a<100&&l<100)return void this._execEvent("flick");if(this.options.momentum&&o<300&&(t=this.hasHorizontalScroll?h.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:n,duration:0},i=this.hasVerticalScroll?h.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},n=t.destination,r=i.destination,c=s.max(t.duration,i.duration),this.isInTransition=1),this.options.snap){var u=this._nearestSnap(n,r);this.currentPage=u,c=this.options.snapSpeed||s.max(s.max(s.min(s.abs(n-u.x),1e3),s.min(s.abs(r-u.y),1e3)),300),n=u.x,r=u.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}if(n!=this.x||r!=this.y)return(n>0||n<this.maxScrollX||r>0||r<this.maxScrollY)&&(d=h.ease.quadratic),void this.scrollTo(n,r,c,d);this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(t!=this.x||i!=this.y)&&(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=h.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;t<i;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,o){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,o)},scrollTo:function(e,t,i,o){o=o||h.ease.circular,this.isInTransition=this.options.useTransition&&i>0;var n=this.options.useTransition&&o.style;!i||n?(n&&(this._transitionTimingFunction(o.style),this._transitionTime(i)),this._translate(e,t)):this._animate(e,t,i,o.fn)},scrollToElement:function(e,t,i,o,n){if(e=e.nodeType?e:this.scroller.querySelector(e)){var r=h.offset(e);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,!0===i&&(i=s.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===o&&(o=s.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=i||0,r.top-=o||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,t=void 0===t||null===t||"auto"===t?s.max(s.abs(this.x-r.left),s.abs(this.y-r.top)):t,this.scrollTo(r.left,r.top,t,n)}},_transitionTime:function(e){e=e||0;var t=h.style.transitionDuration;if(this.scrollerStyle[t]=e+"ms",!e&&h.isBadAndroid){this.scrollerStyle[t]="0.0001ms";var i=this;c(function(){"0.0001ms"===i.scrollerStyle[t]&&(i.scrollerStyle[t]="0s")})}if(this.indicators)for(var o=this.indicators.length;o--;)this.indicators[o].transitionTime(e)},_transitionTimingFunction:function(e){if(this.scrollerStyle[h.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[h.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=s.round(e),t=s.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(e){var t=e?h.removeEvent:h.addEvent,i=this.options.bindToWrapper?this.wrapper:o;t(o,"orientationchange",this),t(o,"resize",this),this.options.click&&t(this.wrapper,"click",this,!0),this.options.disableMouse||(t(this.wrapper,"mousedown",this),t(i,"mousemove",this),t(i,"mousecancel",this),t(i,"mouseup",this)),h.hasPointer&&!this.options.disablePointer&&(t(this.wrapper,h.prefixPointerEvent("pointerdown"),this),t(i,h.prefixPointerEvent("pointermove"),this),t(i,h.prefixPointerEvent("pointercancel"),this),t(i,h.prefixPointerEvent("pointerup"),this)),h.hasTouch&&!this.options.disableTouch&&(t(this.wrapper,"touchstart",this),t(i,"touchmove",this),t(i,"touchcancel",this),t(i,"touchend",this)),t(this.scroller,"transitionend",this),t(this.scroller,"webkitTransitionEnd",this),t(this.scroller,"oTransitionEnd",this),t(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,t,i=o.getComputedStyle(this.scroller,null);return this.options.useTransform?(i=i[h.style.transform].split(")")[0].split(", "),e=+(i[12]||i[4]),t=+(i[13]||i[5])):(e=+i.left.replace(/[^-\d.]/g,""),t=+i.top.replace(/[^-\d.]/g,"")),{x:e,y:t}},_initIndicators:function(){function e(e){if(s.indicators)for(var t=s.indicators.length;t--;)e.call(s.indicators[t])}var t,i=this.options.interactiveScrollbars,o="string"!=typeof this.options.scrollbars,n=[],s=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:a("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),n.push(t)),this.options.scrollX&&(t={el:a("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),n.push(t))),this.options.indicators&&(n=n.concat(this.options.indicators));for(var r=n.length;r--;)this.indicators.push(new l(this,n[r]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){h.addEvent(this.wrapper,"wheel",this),h.addEvent(this.wrapper,"mousewheel",this),h.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,h.removeEvent(this.wrapper,"wheel",this),h.removeEvent(this.wrapper,"mousewheel",this),h.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault();var t,i,o,n,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r.options.snap||r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,i=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,i=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,i=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=i=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=i=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=i,i=0),this.options.snap)return o=this.currentPage.pageX,n=this.currentPage.pageY,t>0?o--:t<0&&o++,i>0?n--:i<0&&n++,void this.goToPage(o,n);o=this.x+s.round(this.hasHorizontalScroll?t:0),n=this.y+s.round(this.hasVerticalScroll?i:0),this.directionX=t>0?-1:t<0?1:0,this.directionY=i>0?-1:i<0?1:0,o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),n>0?n=0:n<this.maxScrollY&&(n=this.maxScrollY),this.scrollTo(o,n,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,i,o,n,r,a=0,l=0,c=0,h=this.options.snapStepX||this.wrapperWidth,d=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(i=s.round(h/2),o=s.round(d/2);c>-this.scrollerWidth;){for(this.pages[a]=[],e=0,n=0;n>-this.scrollerHeight;)this.pages[a][e]={x:s.max(c,this.maxScrollX),y:s.max(n,this.maxScrollY),width:h,height:d,cx:c-i,cy:n-o},n-=d,e++;c-=h,a++}else for(r=this.options.snap,e=r.length,t=-1;a<e;a++)(0===a||r[a].offsetLeft<=r[a-1].offsetLeft)&&(l=0,t++),this.pages[l]||(this.pages[l]=[]),c=s.max(-r[a].offsetLeft,this.maxScrollX),n=s.max(-r[a].offsetTop,this.maxScrollY),i=c-s.round(r[a].offsetWidth/2),o=n-s.round(r[a].offsetHeight/2),this.pages[l][t]={x:c,y:n,width:r[a].offsetWidth,height:r[a].offsetHeight,cx:i,cy:o},c>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.x-this.startX),1e3),s.min(s.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,o=this.pages.length,n=0;if(s.abs(e-this.absStartX)<this.snapThresholdX&&s.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);i<o;i++)if(e>=this.pages[i][0].cx){e=this.pages[i][0].x;break}for(o=this.pages[i].length;n<o;n++)if(t>=this.pages[0][n].cy){t=this.pages[0][n].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,i<0?i=0:i>=this.pages.length&&(i=this.pages.length-1),e=this.pages[i][0].x),n==this.currentPage.pageY&&(n+=this.directionY,n<0?n=0:n>=this.pages[0].length&&(n=this.pages[0].length-1),t=this.pages[0][n].y),{x:e,y:t,pageX:i,pageY:n}},goToPage:function(e,t,i,o){o=o||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:e<0&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:t<0&&(t=0);var n=this.pages[e][t].x,r=this.pages[e][t].y;i=void 0===i?this.options.snapSpeed||s.max(s.max(s.min(s.abs(n-this.x),1e3),s.min(s.abs(r-this.y),1e3)),300):i,this.currentPage={x:n,y:r,pageX:e,pageY:t},this.scrollTo(n,r,i,o)},next:function(e,t){var i=this.currentPage.pageX,o=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,o++),this.goToPage(i,o,e,t)},prev:function(e,t){var i=this.currentPage.pageX,o=this.currentPage.pageY;i--,i<0&&this.hasVerticalScroll&&(i=0,o--),this.goToPage(i,o,e,t)},_initKeys:function(e){var t,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(t in this.options.keyBindings)"string"==typeof this.options.keyBindings[t]&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in i)this.options.keyBindings[t]=this.options.keyBindings[t]||i[t];h.addEvent(o,"keydown",this),this.on("destroy",function(){h.removeEvent(o,"keydown",this)})},_key:function(e){if(this.enabled){var t,i=this.options.snap,o=i?this.currentPage.pageX:this.x,n=i?this.currentPage.pageY:this.y,r=h.getTime(),a=this.keyTime||0;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(s.round(t.x),s.round(t.y)),this.isInTransition=!1),this.keyAcceleration=r-a<200?s.min(this.keyAcceleration+.25,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=i?1:this.wrapperWidth:n+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=i?1:this.wrapperWidth:n-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=i?this.pages.length-1:this.maxScrollX,n=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,n=0;break;case this.options.keyBindings.left:o+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(o,n);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollY&&(n=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,n,0),this.keyTime=r}},_animate:function(e,t,i,o){function n(){var u,p,f,_=h.getTime();if(_>=d)return s.isAnimating=!1,s._translate(e,t),void(s.resetPosition(s.options.bounceTime)||s._execEvent("scrollEnd"));_=(_-l)/i,f=o(_),u=(e-r)*f+r,p=(t-a)*f+a,s._translate(u,p),s.isAnimating&&c(n),3==s.options.probeType&&s._execEvent("scroll")}var s=this,r=this.x,a=this.y,l=h.getTime(),d=l+i;this.isAnimating=!0,n()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":this.enabled&&!e._constructed&&(e.preventDefault(),e.stopPropagation())}}},l.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(h.removeEvent(this.indicator,"touchstart",this),h.removeEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.removeEvent(this.indicator,"mousedown",this),h.removeEvent(o,"touchmove",this),h.removeEvent(o,h.prefixPointerEvent("pointermove"),this),h.removeEvent(o,"mousemove",this),h.removeEvent(o,"touchend",this),h.removeEvent(o,h.prefixPointerEvent("pointerup"),this),h.removeEvent(o,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var t=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=t.pageX,this.lastPointY=t.pageY,this.startTime=h.getTime(),this.options.disableTouch||h.addEvent(o,"touchmove",this),this.options.disablePointer||h.addEvent(o,h.prefixPointerEvent("pointermove"),this),this.options.disableMouse||h.addEvent(o,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,i,o,n,s=e.touches?e.touches[0]:e,r=h.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=s.pageX-this.lastPointX,this.lastPointX=s.pageX,i=s.pageY-this.lastPointY,this.lastPointY=s.pageY,o=this.x+t,n=this.y+i,this._pos(o,n),1==this.scroller.options.probeType&&r-this.startTime>300?(this.startTime=r,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),e.preventDefault(),e.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),h.removeEvent(o,"touchmove",this),h.removeEvent(o,h.prefixPointerEvent("pointermove"),this),h.removeEvent(o,"mousemove",this),this.scroller.options.snap){var t=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),i=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.scroller.x-t.x),1e3),s.min(s.abs(this.scroller.y-t.y),1e3)),300);this.scroller.x==t.x&&this.scroller.y==t.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=t,this.scroller.scrollTo(t.x,t.y,i,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0;var t=h.style.transitionDuration;if(this.indicatorStyle[t]=e+"ms",!e&&h.isBadAndroid){this.indicatorStyle[t]="0.0001ms";var i=this;c(function(){"0.0001ms"===i.indicatorStyle[t]&&(i.indicatorStyle[t]="0s")})}},transitionTimingFunction:function(e){this.indicatorStyle[h.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(h.addClass(this.wrapper,"iScrollBothScrollbars"),h.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(h.removeClass(this.wrapper,"iScrollBothScrollbars"),h.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=s.max(s.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=8-this.indicatorWidth,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=s.max(s.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=8-this.indicatorHeight,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&s.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&s.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=s.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=s.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=s.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=s.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[h.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?s.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?s.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=e?250:500,o=e?0:300;e=e?"1":"0",this.wrapperStyle[h.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),o)}}},r.utils=h,void 0!==e&&e.exports?e.exports=r:void 0!==(i=function(){return r}.call(exports,t,exports,e))&&(e.exports=i)}(window,document,Math)},"./src/chat/js/chat.js":function(e,exports,t){"use strict";(function($,e,avalon,i){function o(){n=new WebSocket(c),n.onmessage=function(t){var i=$.parseJSON(t.data),o={};if(i.type)switch(i.type){case"ping":n.send('{"type":"pong"}');break;case"init":d.clientId=i.client_id;var s={client_id:i.client_id,good_id:(0,a.GetQueryString)("good_id"),size:d.size,bid:l};$.post("/chat/bind/",s,function(t){if(d.records=t.records||[],t.records&&t.records.length?(d.last=t.records[0].id,d.end=0):d.end=1,!d.config.welcome){var i={type:"say",service:1,uid:-1,name:t.config.service_name,avatar:t.config.service_avatar,msg:t.config.welcome||", ?",notice:"",time:t.time,time_show:0};d.records.push(i)}if(d.config=t.config,d.merid=t.merid,d.user=t.user,d.groupId=t.group_id,e(t.config.amap_map_key,d),t.user.good&&t.user.good.href){var i={type:"good",good:t.user.good,time:t.time,time_show:0};d.records.push(i)}n.send('{"type":"init", "bid":"'+l+'", "group_id":"'+t.group_id+'"}')},"json");break;case"say":i.msg&&(o={type:"say",service:i.service,uid:i.user.uid,name:i.user.name,avatar:i.user.avatar,msg:i.msg,notice:i.notice,time:i.time,time_show:i.time_show},d.records.push(o))}},n.onclose=function(){console.log(""),o()},n.onerror=function(){console.log("")}}var n,s,r,a=t("./src/chat/js/libs/utils.js"),l=parseInt((0,a.GetQueryString)("bid"))||0,c=window.WEB_SOCKET_SERVER_HOST||("https:"==document.location.protocol?"wss://"+document.domain+":7273":"ws://"+document.domain+":7272");o();var h=function(){var e=document.getElementById("input-msg");if(e&&(e.scrollHeight<100&&(e.style.height="auto",e.style.height=e.scrollHeight+"px"),e.scrollTop=e.scrollHeight),$("#wrapper").css("bottom",$("#input-wapper").height()),s&&"function"==typeof s.refresh){s.refresh();var t=$("#scroller li:last");t.length&&s.scrollToElement(t[0])}r&&"function"==typeof r.refresh&&r.refresh(),d.mapHeight=.5*document.body.scrollHeight};window.onresize=function(){h()};var d=avalon.define({$id:"chat",backUrl:(0,a.GetQueryString)("backUrl")||"/",config:{},siteName:"",clientId:"",sessionId:"",groupId:"",merid:1,bid:l,msg:"",loading:!1,last:0,size:20,user:{wsid:"",uid:0,name:"",avatar:""},noticeTop:{content:"",className:"",timeout:5,show:""},noticePosition:{content:"()<br>",className:"alert-info",timeout:0,show:1},orderPage:{loading:!1,showPages:3,currentPage:0,totalPages:0,onPageClick:function(e,t){d.orderPage.loading=1,d.orderPage.currentPage=t,$.get("/chat/order/"+t,{size:d.orderPage.showPages,bid:l},function(e){e.totalPages?(d.orderPage.totalPages=e.totalPages,d.orders=e.list):d.orderPage.totalPages=0},"json").complete(function(){d.orderPage.loading=0})}},orders:[],mapHeight:298,positionReady:!1,position:{},positionSearch:"",more:!1,end:0,scrollerHeight:0,records:[],extend:0,fnSendGood:function(e){u("["+e+"]")},fnMsgChange:function(e){h()},fnMsgBlur:function(){},fnMsgKeyup:function(e){13==e.keyCode&&e.preventDefault()},fnExtendChanage:function(e){d.extend=d.extend==e?0:e,h()},configUploadPicture:{endpoint:"/chat/upload",sizes:[{small:200}],sizeLimit:3e6,onUploaded:function(e){e.path&&(u("["+e.path+"]"),this.uploadReady=!1)}},fnSendPosition:function(){if(d.position.lng){var e=d.position.lng+","+d.position.lat;u("["+e+"]"),$("#modalPosition").modal("hide")}else d.noticePosition={content:", ",className:"alert-danger",show:+new Date}},fnSendOrder:function(e){if(e){u("["+e+"]"),$("#modalOrder").modal("hide")}},validateMsg:{onSuccess:function(e,t){(0,a.validTip)(this,1)},onError:function(e,t){(0,a.validTip)(this,0,e[0].message)},onValidateAll:function(e,t){return e.length||u(d.msg),!1}},fnRenderRecords:function(e){setTimeout(function(){if(s&&"function"==typeof s.refresh){if(s.refresh(),!d.more){var e=$("#scroller li:last");e.length&&s.scrollToElement(e[0],100)}d.more=0}},100)},fnGetMore:function(){d.end||d.loading||!d.groupId||(d.loading=!0,d.more=!0,d.scrollerHeight=this.scrollerHeight,$.get("/chat/records",{group_id:d.groupId,last:d.last,size:d.size,service:d.service,bid:l}).success(function(e){e.records&&e.records.length?(d.end=d.last==e.records[0].id,d.last=e.records[0].id,d.records=e.records.concat(d.records.$model),d.end=0):(d.end=1,s&&"function"==typeof s.refresh&&s.refresh())},"json").complete(function(){d.loading=!1}))}});d.$watch("onReady",function(){(0,a.setPassove)(),h(),s=new i("#wrapper",{scrollbars:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0,scrollY:!0,bindToWrapper:!0,probeType:2,mouseWheel:!0}),s.on("scrollEnd",function(){this.y||d.fnGetMore()}),r=new i("#emoticons-wrapper",{scrollX:!0,scrollY:!1,mouseWheel:!0,snap:!0,snapSpeed:400,tap:!0,indicators:{el:document.getElementById("emoticons-indicator"),resize:!1}}),document.getElementById("emoticons-wrapper").addEventListener("tap",function(e){if(e.target){var t=e.target.getAttribute("data-id");t&&(d.msg+="["+t+"]",h())}},!1),$(document).on("click",".modal-record-position",function(){var e=$(this),t=e.data("position");if(!d.recordMarker||!t)return!1;var t=t.split(",");d.recordMap.setZoomAndCenter(16,t),d.recordMarker.setPosition(t)})});var u=function(e){if(!d.groupId)return void(d.noticeTop={content:"",className:"notice-top alert-danger",timeout:5,show:+new Date});var t={service:d.user.wsid?1:0,user:d.user,group_id:d.groupId,msg:e,bid:l,type:"say"};$.post("/chat/say",t,function(e){e.error?d.noticeTop={content:e.msg,className:"notice-top alert-danger",timeout:5,show:+new Date}:(d.msg="",h())},"json")}}).call(exports,t("./node_modules/jquery/dist/jquery.js"),t("./src/chat/js/libs/amap-init.js"),t("./node_modules/avalon2/dist/avalon.js"),t("./node_modules/iscroll/build/iscroll-probe.js"))},"./src/chat/js/libs/utils.js":function(e,exports,t){"use strict";(function($){function e(e){new r.Howl({src:[e]}).play()}function i(e,t,i){var o=$(e).closest(".form-group");switch(o.removeClass("has-success has-warning has-error").find(".form-control-feedback").remove().end().find(".help-block").remove(),t){case 1:o.addClass("has-success has-feedback").find(".form-control").after('<span class="glyphicon glyphicon-ok form-control-feedback"></span>');break;case 0:o.addClass("has-error has-feedback").find(".form-control").after('<span class="glyphicon glyphicon-remove form-control-feedback"></span>')}}function o(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!==i?unescape(i[2]):null}function n(e,t,i,o){e[0].$timer&&clearTimeout(e[0].$timer),e.next(".alert").remove().end().after('<div class="alert '+i+' alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+t+"</div>"),0!==o&&(o=o||5,e[0].$timer=setTimeout(function(){e.next(".alert").remove()},1e3*o))}function s(){var e=function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e};[].forEach.call(document.querySelectorAll(".iscroller"),function(t){t.addEventListener("touchmove",function(e){e.preventDefault()},!!e()&&{capture:!1,passive:!1})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.soundPlay=e,exports.validTip=i,exports.GetQueryString=o,exports.appendAlert=n,exports.setPassove=s;var r=t("./node_modules/howler/dist/howler.js")}).call(exports,t("./node_modules/jquery/dist/jquery.js"))}},["./src/chat/js/chat.js"]);